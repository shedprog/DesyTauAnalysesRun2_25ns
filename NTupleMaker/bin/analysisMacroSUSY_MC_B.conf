########################################
# configuration file for AnalysisMacro #
########################################

IsData = false
ApplyPUreweighting = true
ApplyLeptonSF = true
year = 18
#https://twiki.cern.ch/twiki/bin/viewauth/CMS/PdmV2018Analysis
#https://twiki.cern.ch/twiki/bin/viewauth/CMS/PdmV2017Analysis
#https://twiki.cern.ch/twiki/bin/viewauth/CMS/PdmV2016Analysis
jsonFile = Cert_314472-325175_13TeV_PromptReco_Collisions18_JSON.txt
jsonFile18 = Cert_314472-325175_13TeV_PromptReco_Collisions18_JSON.txt
jsonFile17 = Cert_294927-306462_13TeV_PromptReco_Collisions17_JSON.txt
jsonFile16 = Cert_271036-277148_13TeV_PromptReco_Collisions16_JSON.txtApplyGoodRunSelection = true
ApplyPUreweighting_vertices = false
ApplyPUreweighting_official = false
DataBaseDir = DesyTauAnalyses/NTupleMaker/data

# generic
oppositeSign = true
Lumi = 58830



### Needed for QCD estimation
Region = B
Sign = OS


## Invert
InvertTauIso = false
InvertLeptonIso = false
InvertMET = false
InvertMuIso = false
TauId = DeepTauId
year = 18
#triggers
#https://twiki.cern.ch/twiki/bin/viewauth/CMS/PdmV2018Analysis
#https://twiki.cern.ch/twiki/bin/viewauth/CMS/PdmV2017Analysis
#https://twiki.cern.ch/twiki/bin/viewauth/CMS/PdmV2016Analysis
jsonFile18 = Cert_314472-325175_13TeV_PromptReco_Collisions18_JSON.txt
jsonFile17 = Cert_294927-306462_13TeV_PromptReco_Collisions17_JSON.txt
jsonFile16 = Cert_271036-277148_13TeV_PromptReco_Collisions16_JSON.txt

Pileup_file_name_data18 = pileUp_data_Autumn18.root
Pileup_file_name_mc18 = pileUp_MC_Autumn18.root
Pileup_file_name_data17 = pileUp_data_Autumn17.root
Pileup_file_name_mc17 = pileUp_MC_Autumn17.root
Pileup_file_name_data16 = pileUp_data_Autumn16.root
Pileup_file_name_mc16 = pileUp_MC_Autumn16.root

################# For systematics
#
ApplyTauEnergyScaleUnc = false
TauEnergyScaleUnc = 0.03
ApplyTauCorrectionUncSignPositive = false
MuEnergyScaleUnc = 0.01
ApplyElEnergyScaleUnc = false
ApplyMuEnergyScaleUnc = false
ElEnergyScaleUncBarrel = 0.01
ElEnergyScaleUncEndcaps = 0.025
ApplyMuonCorrectionUncSignPositive = false
ApplyElectronCorrectionUncSignPositive = false
ApplyJetEnergyCorrectionUnc = false
ApplyJetEnergyCorrectionUncSignPositive = false

#################Electrons

# tau kinematic cuts
ptTauCut = 20
etaTauCut = 2.3
dzTauCut = 0.2
isoTauCut = 1.5

# electron veto
ptVetoElectronCut = 10
etaVetoElectronCut = 2.5
dxyVetoElectronCut = 0.045
dzVetoElectronCut = 0.2
isoVetoElectronCut = 0.3
ApplyVetoElectronId = true

# muon kinematic cuts
ptMuonCut = 28
ptMuonHighCut = 28
etaMuonCut = 2.4
dxyMuonCut = 0.045
dzMuonCut = 0.2
isoMuonLowCut = -0.1
isoMuonHighCut = 0.15
ApplyMuonId = true

# tau kinematics
leadchargedhadrcand_dz = 0.2
leadchargedhadrcand_dxy = 0
decayModeFinding  = 0.5
decayModeFindingNewDMs  = 0.5
againstElectronVLooseMVA6  = 0.5
againstElectronVLooseMVA5  = 0.5
againstMuonTight3  = 0.5
againstMuonLoose3  = 0.5
vertexz =  0.2
byCombinedIsolationDeltaBetaCorrRaw3Hits = 1.5



# muon veto
ptVetoMuonCut = 10
etaVetoMuonCut = 2.4
dxyVetoMuonCut = 0.045
dzVetoMuonCut = 0.2
isoVetoMuonCut = 0.3
ApplyVetoMuonId = true

# dimuon veto
ptDilepMuonCut = 15
etaDilepMuonCut = 2.4
dxyDilepMuonCut = 0.045
dzDilepMuonCut = 0.2
isoDilepMuonCut = 0.3
dRDilepVetoCut = 0.15



# topological cuts
dRleptonsCut = 0.5
IsIsoR03 = true
ApplyTriggerMatch = true
DRTrigMatch = 0.5
dRleptonsCutmutau = 0.5
dRleptonsCuteltau = 0.5
dRleptonsCutmuel = 0.3
dZetaCut = -60




BTagAlgorithm = DeepCSV
BTagFile18 = DesyTauAnalyses/NTupleMaker/data/DeepCSV_2018data.csv
BTagEffFile18 = DesyTauAnalyses/NTupleMaker/data/tagging_efficiencies_march2018_btageff-all_samp-inc-DeepCSV_medium.root
BTagFile17 = DesyTauAnalyses/NTupleMaker/data/DeepCSV_2017data.csv
BTagEffFile17 = DesyTauAnalyses/NTupleMaker/data/tagging_efficiencies_march2018_btageff-all_samp-inc-DeepCSV_medium.root
BTagFile16 = DesyTauAnalyses/NTupleMaker/data/DeepCSV_2016data.csv
BTagEffFile16 = DesyTauAnalyses/NTupleMaker/data/tagging_efficiencies_march2018_btageff-all_samp-inc-DeepCSV_medium.root
BTagDiscriminator1 = pfDeepCSVJetTags:probb
BTagDiscriminator2 = pfDeepCSVJetTags:probbb
BTagDiscriminator3 = pfDeepFlavourJetTags:problepb


# jet cuts
etaJetCut = 2.4
ptJetCut = 20
JetEtaCut = 2.4
dRJetLeptonCut = 0.5
bJetEtaCut = 2.4
bTag = 0.800
ApplyJetPfId = true
ApplyJetPuId = false

# vertex cuts
NdofVertexCut = 4
ZVertexCut = 25
DVertexCut = 2

ApplyTrigger = true
SingleMuonFilterName   = hltL3crIsoL1sMu22Or25L1f0L2f10QL3f27QL3trkIsoFiltered0p07  # IsoMu27
SingleMuonTriggerPtCut = 23
SingleMuonTriggerEtaCut = 2.4


MuonidIsoEffFile18 = DesyTauAnalyses/NTupleMaker/data/2018_Data/Muon_Run2018_IdIso.root
MuontrigEffFile18 = DesyTauAnalyses/NTupleMaker/data/2018_Data/Muon_Run2018_IsoMu27.root

## triggers
SingleElectronFilterName    = hltEle35noerWPTightGsfTrackIsoFilter
SingleElectronTriggerPtCut = 36
SingleElectronTriggerEtaCut = 2.1

ElectrontrigEffFile18 = DesyTauAnalyses/NTupleMaker/data/Electron/Run2018/Electron_Run2018_Ele35.root
ElectronIdIsoEffFile18 = DesyTauAnalyses/NTupleMaker/data/Electron/Run2018/Electron_Run2018_IdIso.root
QCDFileName = DesyTauAnalyses/NTupleMaker/data/QCDweights_2018.root


# topological cuts
dRleptonsCutmuel = 0.3


# jet cuts
JetPtLowCutmuel = 30
JetPtHighCutmuel = 30
dRJetLeptonCutmuel = 0.5


################################
## Configuration for eltau
################################


# electron kinematic cuts
ptElectronCuteltau = 26
etaElectronCuteltau = 2.1
dxyElectronCuteltau = 0.045
dzElectronCuteltau = 0.2
isoElectronLowCuteltau = -0.1
isoElectronHighCuteltau = 0.1
ApplyElectronId = true



# dielectron veto
ptDilepElectronCuteltau = 15
etaDilepElectronCuteltau = 2.5
dxyDilepElectronCuteltau = 0.045
dzDilepElectronCuteltau = 0.2
isoDilepElectronCuteltau = 0.3
dRDilepVetoCuteltau = 0.15


# tau kinematic cuts
ptTauCutTauTau = 40
etaTauCutTauTau = 2.1
TauFilterName = hltDoublePFTau35TrackPt1MediumIsolationDz02Reg
MuonTriggerPtCut = 21
dRleptonsCutTauTau = 0.5
#dzTauCut = 0.2
#isoTauCut = 1.5

SingleTauTriggerFile = DesyTauAnalyses/NTupleMaker/test/TP_2016/Tau_Trigger_eff.root

RecoilFileName18 = HTT-utilities/RecoilCorrections_KIT/data/Type1_PFMET_2018.root
RecoilFileNamePuppi18 = HTT-utilities/RecoilCorrections_KIT/data/Type1_PuppiMET_2018.root
MetSysFileName18 = HTT-utilities/RecoilCorrections_KIT/data/PFMETSys_2018.root
MetSysFileNamePuppi18 = HTT-utilities/RecoilCorrections_KIT/data/PuppiMETSys_2018.root
ZMassPtWeightsFileName18 = DesyTauAnalyses/NTupleMaker/data/zptm_weights_2018_kit.root
ZMassPtWeightsHistName18 = zptmass_histo
JEC_UncertaintySources18 = DesyTauAnalyses/NTupleMaker/data/Autumn18_V19_MC_UncertaintySources_AK4PFchs.txt
JER_Resolution18 = Autumn18_V7b_MC_PtResolution_AK4PFchs.txt
JER_ScaleFactor18 = Autumn18_V7b_MC_SF_AK8PFchs.txt
